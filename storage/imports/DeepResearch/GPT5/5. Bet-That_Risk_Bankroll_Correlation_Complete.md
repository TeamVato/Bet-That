
# Bet‑That — Risk, Bankroll & Correlation System (Phase 1: NFL Pre‑Game Props)
_Date: September 25, 2025 (UTC) • Version: 1.0_

> **What this is:** A production‑ready specification and guide that consolidates the complete approach to bankroll sizing (fractional Kelly with guardrails), correlation & Same‑Game Parlays (SGPs), the Risk Module functional spec (algorithms, caps, exposure accounting), UI wireframes, configuration & schemas, reporting, and tests/acceptance.

---

## Table of Contents
- [1. Objectives & Scope](#1-objectives--scope)
- [2. Bankroll Management (Fractional Kelly)](#2-bankroll-management-fractional-kelly)
  - [2.1 Kelly Overview](#21-kelly-overview)
  - [2.2 Guardrails & Rationale](#22-guardrails--rationale)
  - [2.3 Profile Parameters](#23-profile-parameters)
  - [2.4 Stake Calculation — Pseudocode](#24-stake-calculation--pseudocode)
- [3. Correlation & Same‑Game Parlays](#3-correlation--samegame-parlays)
  - [3.1 Why Many SGPs Are Poor EV](#31-why-many-sgps-are-poor-ev)
  - [3.2 How Books Price/Restrict Correlation](#32-how-books-pricerestrict-correlation)
  - [3.3 Practical Heuristics & Red Flags](#33-practical-heuristics--red-flags)
  - [3.4 Using Correlation Intelligently](#34-using-correlation-intelligently)
- [4. Risk Module — Functional Spec](#4-risk-module--functional-spec)
  - [4.1 Decision Flow](#41-decision-flow)
  - [4.2 Correlation Handling (Hard + Soft)](#42-correlation-handling-hard--soft)
  - [4.3 Exposure Accounting & Limits](#43-exposure-accounting--limits)
  - [4.4 Rounding, Edge Cases, UX Feedback](#44-rounding-edge-cases-ux-feedback)
- [5. Low‑Fi Wireframes (ASCII)](#5-lowfi-wireframes-ascii)
  - [A) My Card — Stake Panel](#a-my-card--stake-panel)
  - [B) Exposure Dashboard (Internal)](#b-exposure-dashboard-internal)
  - [C) Post‑Bet Review (User)](#c-postbet-review-user)
- [6. Configuration & Data Schemas](#6-configuration--data-schemas)
  - [6.1 `risk_policy.yaml` — Baseline](#61-risk_policyyaml--baseline)
  - [6.2 `risk_policy.yaml` — Example From Brief](#62-risk_policyyaml--example-from-brief)
  - [6.3 SQLite DDL & Views](#63-sqlite-ddl--views)
  - [6.4 Indexing & Notes](#64-indexing--notes)
- [7. Reporting & Analytics](#7-reporting--analytics)
  - [7.1 Internal Risk](#71-internal-risk)
  - [7.2 User‑Facing](#72-userfacing)
  - [7.3 Weekly Summary Template](#73-weekly-summary-template)
- [8. Tests & Acceptance](#8-tests--acceptance)
  - [8.1 Unit Tests](#81-unit-tests)
  - [8.2 Integration Tests](#82-integration-tests)
  - [8.3 Acceptance Criteria](#83-acceptance-criteria)
- [9. Executive Appendix (1–2 pages)](#9-executive-appendix-12-pages)
- [10. Sources & Further Reading](#10-sources--further-reading)

---

## 1) Objectives & Scope

**Objective:** Ship a robust, implementable **risk system** for Phase 1 (NFL **pre‑game player props**) that:
- Sizes stakes via **fractional Kelly**, safeguarded by **caps** and **filters**.
- Detects and manages **correlation** (esp. SGPs): pricing realities, “correlation tax,” and sensible heuristics.
- Enforces **exposure** limits (per bet / day / team / game / outcome) with clear UX warnings.
- Enables **reporting** (internal risk + user analytics) and **post‑bet review** (CLV, calibration).

**Phase 2 (later):** Add **team markets** (spreads/totals). After hardening correlation/exposure, extend to **live** and **futures**.

---

## 2) Bankroll Management (Fractional Kelly)

### 2.1 Kelly Overview
- **Goal:** Maximize **long‑run growth** of bankroll by sizing each bet in proportion to its **edge** and **odds**.
- **Single‑bet Kelly fraction (decimal odds d)**:  
  \\\( f^\* = \frac{p \cdot (d - 1) - (1 - p)}{d - 1} = \frac{p \cdot b - q}{b} \\\), where \(p\)=win prob, \(q=1-p\), \(b=d-1\).
- **Why fractional?** Real‑world \(p\) is **estimated** → full Kelly can be **too volatile/sensitive**. Fractional Kelly (e.g., 25/50/75%) **reduces variance**, softens model error, and helps users **stick to plan**.

### 2.2 Guardrails & Rationale
- **Min EV%** (skip small edges): filters out noisy/marginal bets.
- **Confidence gate** (model/assumption strength): prevents low‑quality signals.
- **Per‑bet min/max**: avoid trivial or oversized positions.
- **Daily cap (% BR)**: contain **drawdown** risk.
- **Per‑team & per‑game caps**: prevent **concentration**.
- **Same‑player cap**: avoid stacking multiple markets on one player.
- **Rounding** to book units: neat tickets; re‑check caps after rounding.

### 2.3 Profile Parameters
| Parameter                     | Conservative | Moderate | Aggressive |
|------------------------------|--------------|----------|------------|
| Kelly fraction               | 0.25×        | 0.50×    | 1.00×      |
| Min EV%                      | 2.0%         | 1.0%     | 0.1%       |
| Min confidence               | 0.70         | 0.60     | 0.55       |
| Per‑bet min (USD)            | $5           | $5       | $5         |
| Per‑bet max (% of BR)        | 1%           | 2%       | 5%         |
| Daily cap (% of BR)          | 5%           | 10%      | 20%        |
| Per‑game cap (% of BR)       | 3%           | 5%       | 10%        |
| Per‑player cap (% of BR)     | 2%           | 3%       | 5%         |
| Corr penalty λ               | 1.00         | 0.75     | 0.50       |
| Hard corr limit (ρ)          | 0.80         | 0.85     | 0.90       |
| Max stake if ρ>limit (% BR)  | 0.5%         | 1.0%     | 2.0%       |

> **Note:** The table reflects recommended defaults. See §6.2 for the alternate profile block from the original brief.

### 2.4 Stake Calculation — Pseudocode
```text
raw_kelly = kelly_fraction(p, odds_decimal)          # theoretical fraction of bankroll
stake_nominal = bankroll * raw_kelly * kelly_scale   # scale by profile (e.g., 0.5×)
stake_capped  = clamp(stake_nominal, per_bet_min, per_bet_max)

Apply filters & caps in this order:
1) Min EV% gate          → skip if EV% < threshold
2) Confidence gate       → skip if below floor
3) Correlation handling  → soft penalty + hard rules (see §4.2)
4) Exposure caps         → daily / team / game / outcome (residual budget)
5) Rounding to units     → e.g., $0.50; revalidate caps
```

---

## 3) Correlation & Same‑Game Parlays

### 3.1 Why Many SGPs Are Poor EV
- **Naïve parlay math assumes independence.** Same‑game legs (QB ↔ WR, team total ↔ player overs, etc.) are often **positively correlated** → true joint probability is **higher** than independence implies → to protect margin, books **reprice** SGPs (reduced payouts) and/or **block** combos (“correlation tax”).  
- **Compounding vig:** Each added leg introduces more book edge; with SGP repricing, many casual builds end up **heavily -EV**.

### 3.2 How Books Price/Restrict Correlation
- **Algorithmic repricing:** Simulators/engines compute joint distributions → **SGP payout shaved** vs independent product.
- **Restrictions:** Disallow obvious dependencies (e.g., same player receptions **and** receiving yards) or enforce tiny max stakes.
- **Defensive bias:** When uncertain, engines **assume correlation** → pays less than “fair,” protecting the book.

### 3.3 Practical Heuristics & Red Flags
**Positive ρ (tend to rise together):**
- QB pass yards **over** ↔ WR receptions/rec yards **over** (same team).
- WR receptions **over** ↔ WR rec yards **over** (same player).
- RB rush attempts **over** ↔ RB rush yards **over**.
- Team total **over** ↔ key offensive player **overs**.

**Negative ρ (tend to offset):**
- RB1 rush yds **over** ↔ RB2 rush yds **over** (same team, same game).
- QB pass yds **over** ↔ RB rush yds **over** (same team).
- Team A blowout spread cover ↔ Opponent QB **under**.

**UI Red Flags (detect & chip):**
- Same‑game, same‑player multi‑overs (stacking).
- Over/Under conflicts on same market.
- Historically **high overround** market.
- Correlated clusters across legs → show **SGP warning banner**.

### 3.4 Using Correlation Intelligently
- **Game‑script thesis:** Build small, coherent SGPs; check price not over‑deflated.
- **Scenario diversification:** Avoid redundant legs; consider mild negative‑corr pairs when thesis supports them.
- **Portfolio view:** Treat correlated legs as **one scenario**; size **smaller** than independent picks.

---

## 4) Risk Module — Functional Spec

### 4.1 Decision Flow
```text
inputs: candidate_bets = [{p, odds, EV%, confidence, player_id, team_id, game_id, market_key, book, legs?} ...]

for bet in rank(candidate_bets):   # e.g., EV% × confidence (tunable)
  if bet.EV% < min_ev_pct or bet.confidence < min_conf: continue

  # base Kelly stake (single or parlay probability)
  f_kelly = kelly_fraction(bet.p, bet.odds_decimal)
  stake   = bankroll * f_kelly * kelly_scale
  stake   = clamp(stake, per_bet_min, per_bet_max)

  # correlation: soft penalty + hard rules
  rho_sum = sum_pairwise_rho(bet.legs or [bet])
  if rho_sum > 0: stake = stake / (1 + lambda * rho_sum)
  if any_rho_exceeds_limit(bet): stake = min(stake, high_corr_max_pct * bankroll)
  if violates_mutual_exclusion(bet): continue

  # exposure caps: daily / game / team / outcome
  stake   = fit_to_exposure_budgets(stake, bet, user, book)
  if stake < per_bet_min: continue

  # rounding and final cap re-check
  stake   = round_to_unit(stake, unit=0.50)
  stake   = final_cap_check(stake, bet)

  accept(bet, stake); log_exposure(bet, stake)
```

### 4.2 Correlation Handling (Hard + Soft)
- **Soft penalty:** \( \text{stake} \leftarrow \frac{\text{stake}}{1 + \lambda \cdot \sum \rho_{ij}} \)  
  λ per profile (Conservative > Moderate > Aggressive).
- **Hard rules:**
  - Disallow Over **and** Under of same player/market.
  - Per‑player multi‑market cap (profile‑specific).
  - If any ρ > limit → stake capped to **high_corr_max_pct** (or combo rejected).
- **Heuristic ρ pairs (examples):**
  - (“qb_pass_yds:over”, “wr_receptions:over”) → 0.4–0.6
  - (“rb_rush_yds:over”, “rb_rush_att:over”) → 0.5
  - (“wr_receptions:over”, “wr_rec_yds:over”) → 0.6
  - (“rb1_rush_yds:over”, “rb2_rush_yds:over”) → −0.7

### 4.3 Exposure Accounting & Limits
- **Per‑bet**: stake after all adjustments.
- **Per outcome**: cap **liability** (potential payout − stake) by player/team/game class.
- **Per user**: daily cap; per‑game and per‑player caps (profile‑tuned).
- **Per book (optional)**: manage ops friction / external limits.
- **Ledger:** log `run_id, event_id, team_id, game_id, player_id, market_key, line, stake, book, timestamp` (see §6.3).

### 4.4 Rounding, Edge Cases, UX Feedback
- **Rounding** to unit (e.g. $0.50 or $1.00), then re‑check caps.
- If **stake → 0** after caps: show “Not placeable after risk adjustments”.
- **Max payout** per bet (e.g. $20k) — cap or reject.
- **Transparency:** slip shows “Correlation adjustment” and “Exposure cap applied” when relevant.

---

## 5) Low‑Fi Wireframes (ASCII)

### A) My Card — Stake Panel
```text
----------------------------------------------------------
| My Card (Auto Stake Recommendations)             [i]   |
|--------------------------------------------------------|
| Player / Market / Line / Odds / EV% / Confidence       |
| T. Kelce — Anytime TD — — — -160 — +3.5% — High  $100  |
|   [SGP] Correlated with: KC vs DEN                      |
| J. Chase — Rec Yds O80.5 — +100 — +2.2% — Med   $80    |
|   [!] Stake reduced by team exposure cap                |
| ...                                                     |
|--------------------------------------------------------|
| Bankroll: $10,000   Today’s Risk: 4.5% / 5% cap        |
| [Place Bets] [Recalc]                                   |
----------------------------------------------------------
```

### B) Exposure Dashboard (Internal)
```text
========[ Risk Exposure Dashboard — NFL Props ]========
Top Exposures by Player Prop:
PLAYER/PROP                Liability       Limit     Utilization
----------------------------------------------------------------
J. Allen o275.5 pass yds   $47,500         $50,000   95% (HIGH)
S. Diggs o6.5 receptions   $30,200         $50,000   60%
...

By Game:
BUF @ NE                   $110,000        $150,000  73%
KC @ DEN                   $80,000         $150,000  53%

Correlations Alert:
- 78% of J. Allen o275.5 parlays include BUF -6.5 (clustered exposure).
- Surge: DAL DST TD + DAL ML (promo cohort).
=======================================================
```

### C) Post‑Bet Review (User)
```text
✅ Bet Confirmed — 2‑Leg SGP (BUF @ NE)
Stake: $40.00 | Odds: +264 | Potential Payout: $146.00
Legs:
 • J. Allen o275.5 pass yds (−110)
 • S. Diggs o6.5 receptions (−115)
[Correlation adjustment applied]

Bankroll & Exposure
- Bankroll: $1,040.00
- Open Bets: $140 (14% of bankroll)
- Today’s Risk: 9% / 10% daily cap
- Largest Concentration:
  • Game BUF @ NE: 9% BR
  • Player J. Allen props: 5% BR
Suggestion: ~$10 remaining to stay within today’s limit.
```

---

## 6) Configuration & Data Schemas

### 6.1 `risk_policy.yaml` — Baseline
```yaml
profiles:
  conservative:
    kelly_fraction: 0.25
    min_ev: 0.02
    min_confidence: 0.70
    bet_min: 5.0
    bet_max_pct: 0.01
    daily_max_pct: 0.05
    per_game_max_pct: 0.03
    per_player_max_pct: 0.02
    corr_penalty_lambda: 1.0
    corr_hard_limit: 0.8
    high_corr_max_pct: 0.005
  moderate:
    kelly_fraction: 0.5
    min_ev: 0.01
    min_confidence: 0.60
    bet_min: 5.0
    bet_max_pct: 0.02
    daily_max_pct: 0.10
    per_game_max_pct: 0.05
    per_player_max_pct: 0.03
    corr_penalty_lambda: 0.75
    corr_hard_limit: 0.85
    high_corr_max_pct: 0.01
  aggressive:
    kelly_fraction: 1.0
    min_ev: 0.001
    min_confidence: 0.55
    bet_min: 5.0
    bet_max_pct: 0.05
    daily_max_pct: 0.20
    per_game_max_pct: 0.10
    per_player_max_pct: 0.05
    corr_penalty_lambda: 0.5
    corr_hard_limit: 0.9
    high_corr_max_pct: 0.02

correlation:
  pairs:
    - [ "qb_pass_yds:over", "wr_receptions:over", 0.5 ]
    - [ "rb_rush_yds:over", "rb_rush_att:over", 0.5 ]
    - [ "wr_receptions:over", "wr_rec_yds:over", 0.6 ]
    - [ "rb1_rush_yds:over", "rb2_rush_yds:over", -0.7 ]
  lambda_penalty: 0.75

exposure_limits:
  player_prop: 50000
  team_side: 100000
  game_total: 100000
  single_game: 150000
  user_single_bet_payout_max: 20000

ui:
  rounding_unit_usd: 1.0
  show_sgp_banner: true
```

### 6.2 `risk_policy.yaml` — Example From Brief
```yaml
bankroll_usd: 10000
profiles:
  conservative:
    kelly_scale: 0.25
    min_ev_pct: 2.0
    min_confidence: 0.60
    per_bet_min: 10
    per_bet_max: 150
    daily_risk_cap_pct: 3
    per_team_cap_pct: 1.2
    per_game_cap_pct: 1.8
    same_player_max_picks: 1
  moderate:
    kelly_scale: 0.5
    min_ev_pct: 1.5
    min_confidence: 0.55
    per_bet_min: 10
    per_bet_max: 300
    daily_risk_cap_pct: 5
    per_team_cap_pct: 2
    per_game_cap_pct: 3
    same_player_max_picks: 2
  aggressive:
    kelly_scale: 0.75
    min_ev_pct: 1.0
    min_confidence: 0.52
    per_bet_min: 10
    per_bet_max: 500
    daily_risk_cap_pct: 8
    per_team_cap_pct: 3
    per_game_cap_pct: 4.5
    same_player_max_picks: 3
correlation:
  lambda_penalty: 0.35
  pairs:
    - [ "qb_pass_yds:over", "wr_receptions:over", 0.4 ]
    - [ "rb_rush_yds:over", "rb_rush_att:over", 0.5 ]
    - [ "wr_receptions:over", "wr_rec_yds:over", 0.6 ]
ui:
  rounding_unit_usd: 1
  show_sgp_banner: true
```

### 6.3 SQLite DDL & Views
```sql
-- Users & Bankroll
CREATE TABLE IF NOT EXISTS users (
  user_id INTEGER PRIMARY KEY,
  username TEXT,
  profile TEXT CHECK(profile IN ('conservative','moderate','aggressive')) DEFAULT 'moderate',
  bankroll REAL NOT NULL,
  daily_staked REAL DEFAULT 0.0,
  last_reset_date DATE
);

-- Bets & Legs
CREATE TABLE IF NOT EXISTS bets (
  bet_id INTEGER PRIMARY KEY,
  user_id INTEGER NOT NULL,
  is_parlay INTEGER NOT NULL DEFAULT 0,
  stake REAL NOT NULL,
  odds_decimal REAL NOT NULL,
  expected_value REAL,
  placed_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  status TEXT CHECK(status IN ('open','won','lost','void')) DEFAULT 'open',
  payout REAL DEFAULT 0.0,
  FOREIGN KEY(user_id) REFERENCES users(user_id)
);

CREATE TABLE IF NOT EXISTS bet_legs (
  bet_id INTEGER,
  leg_no INTEGER,
  description TEXT,
  outcome_key TEXT,        -- e.g., "Allen_PASS_O275.5"
  odds_decimal REAL,
  result TEXT DEFAULT 'pending',  -- win/lose/void
  PRIMARY KEY (bet_id, leg_no),
  FOREIGN KEY (bet_id) REFERENCES bets(bet_id)
);

-- Outcome dimension (for mapping legs to player/team/game)
CREATE TABLE IF NOT EXISTS outcome_dim (
  outcome_key TEXT PRIMARY KEY,
  player_id TEXT,
  team_id TEXT,
  game_id TEXT,
  market_key TEXT,
  line REAL
);

-- Exposure ledger (optional granular logging)
CREATE TABLE IF NOT EXISTS exposure_ledger (
  run_id TEXT,
  event_id TEXT,
  team_id TEXT,
  game_id TEXT,
  player_id TEXT,
  market_key TEXT,
  line REAL,
  stake_usd REAL,
  book_key TEXT,
  timestamp_utc TEXT
);

-- Views for exposure
CREATE VIEW IF NOT EXISTS exposure_by_outcome AS
SELECT L.outcome_key,
       SUM(CASE WHEN B.status='open' THEN (B.stake * (B.odds_decimal - 1)) ELSE 0 END) AS liability,
       COUNT(DISTINCT B.bet_id) AS num_bets
FROM bet_legs L
JOIN bets B ON B.bet_id = L.bet_id
GROUP BY 1;

CREATE VIEW IF NOT EXISTS exposure_by_player AS
SELECT D.player_id,
       SUM(CASE WHEN B.status='open' THEN (B.stake * (B.odds_decimal - 1)) ELSE 0 END) AS liability
FROM bet_legs L
JOIN bets B ON B.bet_id = L.bet_id
JOIN outcome_dim D ON D.outcome_key = L.outcome_key
GROUP BY 1;

CREATE VIEW IF NOT EXISTS exposure_by_team AS
SELECT D.team_id,
       SUM(CASE WHEN B.status='open' THEN (B.stake * (B.odds_decimal - 1)) ELSE 0 END) AS liability
FROM bet_legs L
JOIN bets B ON B.bet_id = L.bet_id
JOIN outcome_dim D ON D.outcome_key = L.outcome_key
GROUP BY 1;

CREATE VIEW IF NOT EXISTS exposure_by_game AS
SELECT D.game_id,
       SUM(CASE WHEN B.status='open' THEN (B.stake * (B.odds_decimal - 1)) ELSE 0 END) AS liability
FROM bet_legs L
JOIN bets B ON B.bet_id = L.bet_id
JOIN outcome_dim D ON D.outcome_key = L.outcome_key
GROUP BY 1;

-- Optional CLV tracking helper (store captured closing odds in outcome_dim or separate table)
CREATE TABLE IF NOT EXISTS closing_odds (
  outcome_key TEXT,
  as_of DATETIME,
  odds_decimal REAL,
  PRIMARY KEY(outcome_key, as_of)
);
```

### 6.4 Indexing & Notes
- Index **`bet_legs.outcome_key`**, **`outcome_dim.game_id`**, **`outcome_dim.player_id`** for fast exposure queries.
- For CLV, snapshot closing odds pre‑kickoff → compute CLV per bet/leg for reporting.

---

## 7) Reporting & Analytics

### 7.1 Internal Risk
- **Exposure dashboards:** by outcome, player, team, game; highlight >80% utilization.
- **Correlation heatmap:** cluster analysis of outcomes commonly parlayed together.
- **Hold & P&L:** straight vs parlay; expected (EV sum) vs realized.
- **CLV tracking:** distribution by user/segment; sharp index for limit management.
- **Calibration:** predicted probability buckets vs actual outcomes; Brier/log‑loss.

### 7.2 User‑Facing
- **Bankroll & Exposure widget:** bankroll, open stakes %, today’s risk %, top concentrations.
- **Weekly report:** edge hit rate, **CLV vs close** histogram, calibration by confidence.
- **Transparency:** show “line moved in your favor” badges; teach CLV as a leading indicator.

### 7.3 Weekly Summary Template
```text
Bets: 20 (W-L 12–8) | Profit: +$80 (ROI +8% on $1,000 staked)
CLV: Average +2.3% (You beat the close on 15/20 bets)
Best CLV: Cardinals +7.5 (you -110, closed -130)  ✅
Worst CLV: Lakers O220 (you -105, closed +105)    ❌
Calibration: 60% bucket → 62.5% realized (well-calibrated)
Tip: Keep aiming for positive CLV; it’s a strong indicator of a durable edge.
```

---

## 8) Tests & Acceptance

### 8.1 Unit Tests
- **Kelly math & scaling:** p/odds cases; 0 or negative EV → 0 stake; profile scaling.
- **Filters:** EV/confidence gates block/allow correctly.
- **Correlation:** penalty math (λ·Σρ); hard‑limit enforcement; mutual exclusion.
- **Exposure fitting:** residual budgets for daily/team/game/outcome caps.
- **Rounding:** unit rounding and re‑validation.

### 8.2 Integration Tests
- **End‑to‑end single bet:** recommend stake → accept → settle → bankroll updates.
- **Correlated SGP:** detect ρ; reduce stake; enforce caps; ledger entries.
- **Daily/game caps:** sequence to cap; verify truncation/rejections with messages.
- **Exposure caps:** simulate near‑limit outcome; next bet trimmed to headroom.
- **UI flow:** disallowed combos; stake adjustments; confirmation reflects adjusted numbers.

### 8.3 Acceptance Criteria
- UI shows **stake per pick** with clear warnings; totals obey caps.
- Internal exposure views match ledger totals; **no cap breaches** in tests.
- Weekly CLV & calibration render from real data.
- No “profit guarantee” language; responsible staking cues present.

---

## 9) Executive Appendix (1–2 pages)

**Controls Implemented:** Fractional Kelly staking with **per‑bet**, **per‑team**, **per‑game**, and **daily** caps; correlation filters (hard rules) and penalties (λ·Σρ); EV & confidence gates; audit trail & exposure dashboards.

**Why this works:** Kelly maximizes long‑run growth; fractional scaling and caps **tame volatility** and **estimation risk**. Correlation treated as **scenario risk**: we reduce size on clustered outcomes and flag SGP repricing. Exposure limits enforce diversification. Success measured by **positive CLV**, solid **calibration**, target **hold** and healthy user **retention**.

**KPIs to watch:**
- Hold % (by bet type); EV vs realized P&L
- CLV distribution; share of users with positive CLV
- Calibration (bucket accuracy, Brier score)
- Exposure utilization; frequency of limit interventions
- Retention & LTV by profile; drawdown stats

**Risk Limits (defaults):**
- Daily risk ≤ **10%** of bankroll (Moderate)
- Per‑bet ≤ **2%** of bankroll (Moderate)
- Per‑game ≤ **5%**; Per‑player ≤ **3%**
- Outcome liability caps per player/team/game; max payout per bet

---

## 10) Sources & Further Reading

- Kelly overview — Investopedia: https://www.investopedia.com/terms/k/kellycriterion.asp  
- SGP background — Legal Sports Report: https://www.legalsportsreport.com/how-to-bet/same-game-parlays/  
- SGP “correlation tax” discussion — Pikkit: https://www.pikkit.com/blog/best-worst-sportsbooks-same-game-parlay-sgp-betting  
- Correlated parlays explainer — BoydsBets: https://www.boydsbets.com/correlated-parlays/

> Notes: We avoid long quotes; cite sources inline where relevant. Heuristic ρ values are **guides** and should be calibrated from historical data over time.
